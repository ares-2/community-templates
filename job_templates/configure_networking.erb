<%#
name: Configure networking
job_category: Networking
description_format: 'Configure networking (restart: %{restart})'
snippet: false
template_inputs:
- name: restart
  required: true
  input_type: user
  options: "no\r\nyes"
  advanced: true
provider_type: SSH
kind: job_template
%>

<% if @host.operatingsystem.family == 'Redhat' -%>
  <%= snippet('kickstart_networking_setup') %>
  <% service = 'NetworkManager' -%>
<% elsif @host.operatingsystem.family == 'Debian' -%>
  <%= snippet('preseed_networking_setup') %>
  <% service = 'network-manager' -%>
<% else %>
  render_error(N_('Unsupported or no operating system found for this host.'))
<% end %>

<% if input('restart') == 'yes' -%>
  sudo service <%= service %> restart
<% end -%>    
