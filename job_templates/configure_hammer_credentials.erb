<%#
name: Configure hammer credentials
job_category: Hammer
snippet: false
template_inputs:
- name: url
  required: true
  input_type: user
  description: server url
  advanced: false
- name: user
  required: false
  input_type: user
  description: user account for which we create hammer configuration
  advanced: true
- name: username
  required: true
  input_type: user
  description: login to use when communicating with server using hammer
  advanced: false
- name: password
  required: true
  input_type: user
  description: password to use when communicating with server using hammer
  advanced: false
provider_type: SSH
kind: job_template
%>

<% user_home = input('user').blank? ? '/root' : "/home/#{input('user')}" %>

mkdir -p <%= user_home -%>/.hammer/
cat > <%= user_home -%>/.hammer/cli_config.yml <<EOS
foreman:
  :host: '<%= input('url') %>'
  :username: '<%= input('username') %>'
  :password: '<%= input('password') %>'
EOS
